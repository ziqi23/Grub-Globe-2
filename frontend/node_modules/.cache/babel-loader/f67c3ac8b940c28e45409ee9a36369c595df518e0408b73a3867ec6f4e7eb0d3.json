{"ast":null,"code":"async function jwtFetch(url) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  options.method = options.method || \"GET\";\n  options.headers = options.headers || {};\n  const jwtToken = localStorage.getItem(\"jwtToken\");\n  if (jwtToken) options.headers[\"Authorization\"] = 'Bearer ' + jwtToken;\n  if (options.method.toUpperCase() !== \"GET\") {\n    options.headers[\"Content-Type\"] = options.headers[\"Content-Type\"] || \"application/json\";\n    options.headers[\"CSRF-Token\"] = getCookie(\"CSRF-TOKEN\");\n  }\n  const res = await fetch(url, options);\n  if (res.status >= 400) throw res;\n  return res;\n}\nfunction getCookie(cookieName) {\n  const cookies = document.cookie.split(';');\n  for (let cookie of cookies) {\n    const [name, value] = cookie.split('=');\n    if (name.trim() === cookieName) return value;\n  }\n  return null;\n}\nexport default jwtFetch;","map":{"version":3,"names":["jwtFetch","url","options","arguments","length","undefined","method","headers","jwtToken","localStorage","getItem","toUpperCase","getCookie","res","fetch","status","cookieName","cookies","document","cookie","split","name","value","trim"],"sources":["/Users/ziqizou/Desktop/Grub Globe/frontend/src/store/jwt.js"],"sourcesContent":["async function jwtFetch(url, options = {}) {\n\n  options.method = options.method || \"GET\";\n  options.headers = options.headers || {};\n  const jwtToken = localStorage.getItem(\"jwtToken\");\n\n  if (jwtToken) options.headers[\"Authorization\"] = 'Bearer ' + jwtToken;\n\n  if (options.method.toUpperCase() !== \"GET\") {\n    options.headers[\"Content-Type\"] =\n      options.headers[\"Content-Type\"] || \"application/json\";\n    options.headers[\"CSRF-Token\"] = getCookie(\"CSRF-TOKEN\");\n\n  }\n\n  const res = await fetch(url, options);\n\n  if (res.status >= 400) throw res;\n\n  return res;\n}\n\nfunction getCookie(cookieName) {\n    const cookies = document.cookie.split(';');\n    for (let cookie of cookies) {\n        const [name, value] = cookie.split('=');\n        if (name.trim() === cookieName) return value;\n    }\n    return null;\n  }\n\nexport default jwtFetch;\n\n"],"mappings":"AAAA,eAAeA,QAAQA,CAACC,GAAG,EAAgB;EAAA,IAAdC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EAEvCD,OAAO,CAACI,MAAM,GAAGJ,OAAO,CAACI,MAAM,IAAI,KAAK;EACxCJ,OAAO,CAACK,OAAO,GAAGL,OAAO,CAACK,OAAO,IAAI,CAAC,CAAC;EACvC,MAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;EAEjD,IAAIF,QAAQ,EAAEN,OAAO,CAACK,OAAO,CAAC,eAAe,CAAC,GAAG,SAAS,GAAGC,QAAQ;EAErE,IAAIN,OAAO,CAACI,MAAM,CAACK,WAAW,CAAC,CAAC,KAAK,KAAK,EAAE;IAC1CT,OAAO,CAACK,OAAO,CAAC,cAAc,CAAC,GAC7BL,OAAO,CAACK,OAAO,CAAC,cAAc,CAAC,IAAI,kBAAkB;IACvDL,OAAO,CAACK,OAAO,CAAC,YAAY,CAAC,GAAGK,SAAS,CAAC,YAAY,CAAC;EAEzD;EAEA,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAACb,GAAG,EAAEC,OAAO,CAAC;EAErC,IAAIW,GAAG,CAACE,MAAM,IAAI,GAAG,EAAE,MAAMF,GAAG;EAEhC,OAAOA,GAAG;AACZ;AAEA,SAASD,SAASA,CAACI,UAAU,EAAE;EAC3B,MAAMC,OAAO,GAAGC,QAAQ,CAACC,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC;EAC1C,KAAK,IAAID,MAAM,IAAIF,OAAO,EAAE;IACxB,MAAM,CAACI,IAAI,EAAEC,KAAK,CAAC,GAAGH,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC;IACvC,IAAIC,IAAI,CAACE,IAAI,CAAC,CAAC,KAAKP,UAAU,EAAE,OAAOM,KAAK;EAChD;EACA,OAAO,IAAI;AACb;AAEF,eAAetB,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}